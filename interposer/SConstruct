#! /usr/bin/env python

""" Build file for the interposing library. """

import os

__author__ = 'Alex Merritt'
__email__ = 'merritt.alex@gatech.edu'

Import('NODE_NAME', 'ENV', 'INSTALL_DIR')

env = ENV[NODE_NAME]

sources = []

files = os.listdir('./')
for src in files:
	(name,ext) = os.path.splitext(src)
	if '.c' == ext.lower():
		sources.append(src)

sources.append('../common/cuda/marshal_hidden.c')

lib = env.SharedLibrary('libci.so', sources)
env.Install(INSTALL_DIR + '/lib', lib)
